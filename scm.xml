<?xml version="1.0"?>
<project name="scm">

  <target name="scm" depends="check-guice,fetch-guice"/>

  <target name="check-guice">
    <available file="${guice}/src" type="dir" property="have.guice"/>
  </target>

  <path id="svn.path">
    <pathelement location="${antlib}/svnkit.jar"/>
    <pathelement location="${antlib}/svnkit-cli.jar"/>
  </path>

  <target name="fetch-guice" unless="have.guice">
    <java classname="org.tmatesoft.svn.cli.SVN" fork="true">
      <classpath refId="svn.path"/>
      <arg value="export"/>
      <arg value="--force"/>
      <arg value="-N"/>
      <arg value="${google.guice.repo}"/>
      <arg value="${guice}"/>
    </java>
    <java classname="org.tmatesoft.svn.cli.SVN" fork="true">
      <classpath refId="svn.path"/>
      <arg value="export"/>
      <arg value="--force"/>
      <arg value="${google.guice.repo}/src"/>
      <arg value="${guice}/src"/>
    </java>
    <java classname="org.tmatesoft.svn.cli.SVN" fork="true">
      <classpath refId="svn.path"/>
      <arg value="export"/>
      <arg value="--force"/>
      <arg value="${google.guice.repo}/test"/>
      <arg value="${guice}/test"/>
    </java>
    <java classname="org.tmatesoft.svn.cli.SVN" fork="true">
      <classpath refId="svn.path"/>
      <arg value="export"/>
      <arg value="--force"/>
      <arg value="${google.guice.repo}/lib"/>
      <arg value="${guice}/lib"/>
    </java>
  </target>

</project>
